function tableToGrid(d,c){jQuery(d).each(function(){if(this.grid){return}jQuery(this).width("99%");var A=jQuery(this).width();var u=jQuery("input[type=checkbox]:first",jQuery(this));var s=jQuery("input[type=radio]:first",jQuery(this));var y=u.length>0;var t=!y&&s.length>0;var q=y||t;var r=u.attr("name")||s.attr("name");var a=[];var v=[];jQuery("th",jQuery(this)).each(function(){if(a.length===0&&q){a.push({name:"__selection__",index:"__selection__",width:0,hidden:true});v.push("__selection__")}else{a.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150});v.push(jQuery(this).html())}});var w=[];var x=[];var B=[];jQuery("tbody > tr",jQuery(this)).each(function(){var e={};var f=0;jQuery("td",jQuery(this)).each(function(){if(f===0&&q){var h=jQuery("input",jQuery(this));var g=h.attr("value");x.push(g||w.length);if(h.attr("checked")){B.push(g)}e[a[f].name]=h.attr("value")}else{e[a[f].name]=jQuery(this).html()}f++});if(f>0){w.push(e)}});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:A,colNames:v,colModel:a,multiselect:y},c||{}));var b;for(b=0;b<w.length;b++){var z=null;if(x.length>0){z=x[b];if(z&&z.replace){z=encodeURIComponent(z).replace(/[.\-%]/g,"_")}}if(z===null){z=b+1}jQuery(this).jqGrid("addRowData",z,w[b])}for(b=0;b<B.length;b++){jQuery(this).jqGrid("setSelection",B[b])}})};