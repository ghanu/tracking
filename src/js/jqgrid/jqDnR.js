(function(n){n.fn.jqDrag=function(a){return j(this,a,"d")};n.fn.jqResize=function(a,b){return j(this,a,"r",b)};n.jqDnR={dnr:{},e:0,drag:function(a){if(m.k=="d"){f.css({left:m.X+a.pageX-m.pX,top:m.Y+a.pageY-m.pY})}else{f.css({width:Math.max(a.pageX-m.pX+m.W,0),height:Math.max(a.pageY-m.pY+m.H,0)});if(M1){l.css({width:Math.max(a.pageX-M1.pX+M1.W,0),height:Math.max(a.pageY-M1.pY+M1.H,0)})}}return false},stop:function(){n(document).unbind("mousemove",k.drag).unbind("mouseup",k.stop)}};var k=n.jqDnR,m=k.dnr,f=k.e,l,j=function(c,d,a,b){return c.each(function(){d=(d)?n(d,c):c;d.bind("mousedown",{e:c,k:a},function(e){var g=e.data,h={};f=g.e;l=b?n(b):false;if(f.css("position")!="relative"){try{f.position(h)}catch(p){}}m={X:h.left||i("left")||0,Y:h.top||i("top")||0,W:i("width")||f[0].scrollWidth||0,H:i("height")||f[0].scrollHeight||0,pX:e.pageX,pY:e.pageY,k:g.k};if(l&&g.k!="d"){M1={X:h.left||f1("left")||0,Y:h.top||f1("top")||0,W:l[0].offsetWidth||f1("width")||0,H:l[0].offsetHeight||f1("height")||0,pX:e.pageX,pY:e.pageY,k:g.k}}else{M1=false}n(document).mousemove(n.jqDnR.drag).mouseup(n.jqDnR.stop);return false})})},i=function(a){return parseInt(f.css(a))||false};f1=function(a){return parseInt(l.css(a))||false}})(jQuery);