var xmlJsonClass={xml2json:function(h,f){if(h.nodeType===9){h=h.documentElement}var i=this.removeWhite(h);var j=this.toObj(i);var g=this.toJson(j,h.nodeName,"\t");return"{\n"+f+(f?g.replace(/\t/g,f):g.replace(/\t|\n/g,""))+"\n}"},json2xml:function(f,g){var j=function(b,a,q){var d="";var e,r;if(b instanceof Array){if(b.length===0){d+=q+"<"+a+">__EMPTY_ARRAY_</"+a+">\n"}else{for(e=0,r=b.length;e<r;e+=1){var c=q+j(b[e],a,q+"\t")+"\n";d+=c}}}else{if(typeof(b)==="object"){var m=false;d+=q+"<"+a;var n;for(n in b){if(b.hasOwnProperty(n)){if(n.charAt(0)==="@"){d+=" "+n.substr(1)+'="'+b[n].toString()+'"'}else{m=true}}}d+=m?">":"/>";if(m){for(n in b){if(b.hasOwnProperty(n)){if(n==="#text"){d+=b[n]}else{if(n==="#cdata"){d+="<![CDATA["+b[n]+"]]>"}else{if(n.charAt(0)!=="@"){d+=j(b[n],n,q+"\t")}}}}}d+=(d.charAt(d.length-1)==="\n"?q:"")+"</"+a+">"}}else{if(typeof(b)==="function"){d+=q+"<"+a+"><![CDATA["+b+"]]></"+a+">"}else{if(b.toString()==='""'||b.toString().length===0){d+=q+"<"+a+">__EMPTY_STRING_</"+a+">"}else{d+=q+"<"+a+">"+b.toString()+"</"+a+">"}}}}return d};var h="";var i;for(i in f){if(f.hasOwnProperty(i)){h+=j(f[i],i,"")}}return g?h.replace(/\t/g,g):h.replace(/\t|\n/g,"")},toObj:function(n){var i={};var j=/function/i;if(n.nodeType===1){if(n.attributes.length){var k;for(k=0;k<n.attributes.length;k+=1){i["@"+n.attributes[k].nodeName]=(n.attributes[k].nodeValue||"").toString()}}if(n.firstChild){var o=0,l=0,m=false;var p;for(p=n.firstChild;p;p=p.nextSibling){if(p.nodeType===1){m=true}else{if(p.nodeType===3&&p.nodeValue.match(/[^ \f\n\r\t\v]/)){o+=1}else{if(p.nodeType===4){l+=1}}}}if(m){if(o<2&&l<2){this.removeWhite(n);for(p=n.firstChild;p;p=p.nextSibling){if(p.nodeType===3){i["#text"]=this.escape(p.nodeValue)}else{if(p.nodeType===4){if(j.test(p.nodeValue)){i[p.nodeName]=[i[p.nodeName],p.nodeValue]}else{i["#cdata"]=this.escape(p.nodeValue)}}else{if(i[p.nodeName]){if(i[p.nodeName] instanceof Array){i[p.nodeName][i[p.nodeName].length]=this.toObj(p)}else{i[p.nodeName]=[i[p.nodeName],this.toObj(p)]}}else{i[p.nodeName]=this.toObj(p)}}}}}else{if(!n.attributes.length){i=this.escape(this.innerXml(n))}else{i["#text"]=this.escape(this.innerXml(n))}}}else{if(o){if(!n.attributes.length){i=this.escape(this.innerXml(n));if(i==="__EMPTY_ARRAY_"){i="[]"}else{if(i==="__EMPTY_STRING_"){i=""}}}else{i["#text"]=this.escape(this.innerXml(n))}}else{if(l){if(l>1){i=this.escape(this.innerXml(n))}else{for(p=n.firstChild;p;p=p.nextSibling){if(j.test(n.firstChild.nodeValue)){i=n.firstChild.nodeValue;break}else{i["#cdata"]=this.escape(p.nodeValue)}}}}}}}if(!n.attributes.length&&!n.firstChild){i=null}}else{if(n.nodeType===9){i=this.toObj(n.documentElement)}else{alert("unhandled node type: "+n.nodeType)}}return i},toJson:function(q,r,n){var t=r?('"'+r+'"'):"";if(q==="[]"){t+=(r?":[]":"[]")}else{if(q instanceof Array){var o,w,i=[];for(w=0,o=q.length;w<o;w+=1){i[w]=this.toJson(q[w],"",n+"\t")}t+=(r?":[":"[")+(i.length>1?("\n"+n+"\t"+i.join(",\n"+n+"\t")+"\n"+n):i.join(""))+"]"}else{if(q===null){t+=(r&&":")+"null"}else{if(typeof(q)==="object"){var v=[];var m;for(m in q){if(q.hasOwnProperty(m)){v[v.length]=this.toJson(q[m],m,n+"\t")}}t+=(r?":{":"{")+(v.length>1?("\n"+n+"\t"+v.join(",\n"+n+"\t")+"\n"+n):v.join(""))+"}"}else{if(typeof(q)==="string"){var u=/(^-?\d+\.?\d*$)/;var s=/function/i;var x=q.toString();if(u.test(x)||s.test(x)||x==="false"||x==="true"){t+=(r&&":")+x}else{t+=(r&&":")+'"'+q+'"'}}else{t+=(r&&":")+q.toString()}}}}}return t},innerXml:function(f){var g="";if("innerHTML" in f){g=f.innerHTML}else{var h=function(d){var a="",b;if(d.nodeType===1){a+="<"+d.nodeName;for(b=0;b<d.attributes.length;b+=1){a+=" "+d.attributes[b].nodeName+'="'+(d.attributes[b].nodeValue||"").toString()+'"'}if(d.firstChild){a+=">";for(var e=d.firstChild;e;e=e.nextSibling){a+=h(e)}a+="</"+d.nodeName+">"}else{a+="/>"}}else{if(d.nodeType===3){a+=d.nodeValue}else{if(d.nodeType===4){a+="<![CDATA["+d.nodeValue+"]]>"}}}return a};for(var c=f.firstChild;c;c=c.nextSibling){g+=h(c)}}return g},escape:function(b){return b.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(f){f.normalize();var e;for(e=f.firstChild;e;){if(e.nodeType===3){if(!e.nodeValue.match(/[^ \f\n\r\t\v]/)){var d=e.nextSibling;f.removeChild(e);e=d}else{e=e.nextSibling}}else{if(e.nodeType===1){this.removeWhite(e);e=e.nextSibling}else{e=e.nextSibling}}}return f}};